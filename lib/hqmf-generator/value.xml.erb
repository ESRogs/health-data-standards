<%- if value.class==HQMF::Range -%>
  <<%= name %> <%= "xsi:type=\"#{value.type}\"" if include_type %>>
    <%- # WARNING: Hacky Fix That Must Be Looked At Again! -%>
    <%- if name == 'pauseQuantity' -%>
      <uncertainRange <%= "lowClosed=\"true\"" if value.low && value.low.inclusive? %> <%= "highClosed=\"true\"" if value.high && value.high.inclusive? %>>
        <%= xml_for_value(value.low, 'low') if value.low -%>
        <%= xml_for_value(value.high, 'high') if value.high -%>
      </uncertainRange>
    <%- else -%>
      <%= xml_for_value(value.low, 'low', false) if value.low -%>
      <%= xml_for_value(value.high, 'high', false) if value.high -%>
    <%- end -%>
  </<%= name %>>
<%- elsif value.class==HQMF::Coded -%>
  <%- if value.code_list_id -%>
  <<%= name %> xsi:type="<%= value.type %>" valueSet="<%= value.code_list_id %>">
  <%- else -%>
  <<%= name %> xsi:type="<%= value.type %>" codeSystem="<%= value.system %>" code="<%= value.code %>">
  <%- end -%>
     <displayName value="<%=ERB::Util::h value.title %>"/>
  </<%= name %>>
<%- elsif value.class==HQMF::Value -%>
  <%- if value.derived? -%>
  <<%= name %> nullFlavor="DER">
    <expression value="<%= value.expression %>"/>
  </<%= name %>>
  <%- else -%>
  <<%= name %> <%= "xsi:type=\"#{value.type}\"" if include_type %> value="<%= value.value %>"<%= " unit=\"#{value.unit}\"" if value.unit %>/>
  <%- end -%>
<%- elsif value.class==HQMF::AnyValue -%>
  <<%= name %> xsi:type="ANY" nullFlavor="NI"/>
<%- end -%>